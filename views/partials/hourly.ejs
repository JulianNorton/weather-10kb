<ul class="forecast-secondary">
    <%
        for (var i = 1; i < 12; i++) {
            var hourlyTime = moment.unix(data.hourly[i].time);
            var nextHourlyTime = moment.unix(data.hourly[i + 1].time);
    
            if(hourlyTime.diff(data.tomorrowTime) < 0 && data.name == "Tomorrow") { // Is today but showing Tomorrow
                continue;
            }
            if(hourlyTime.diff(data.tomorrowTime) >= 0 && data.name == "Today") { // Is tomorrow but showing Today
                break;
            }
    
            // Calculate current and next hourly summary strings to determine if the hours should be collapsed
            var hourlySummary = include('../partials/summary', {data: data.hourly[i]})
            var nextHourlySummary = include('../partials/summary', {data: data.hourly[i + 1]})
    
            // If it's not the last hour of the "Today" report AND it's not the last hour of the "Tomorrow"
            // report AND the current hour's summary text is the same as next hour's summary text, then add
            // the current hour startime to the next hour and don't display this hour
            if(!(nextHourlyTime.diff(data.tomorrowTime) >= 0 && data.name == "Today")
              && !(nextHourlyTime.diff(data.tomorrowTime) < 0 && data.name == "Tomorrow")
              && hourlySummary === nextHourlySummary
            ) {
              data.hourly[i + 1].startTime = data.hourly[i].startTime || data.hourly[i].time;
              continue;
            }
        %>
        <li>
            <span class="small muted data-secondary">
            <%= data.hourly[i].startTime ? moment.unix(data.hourly[i].startTime).fromNow() + ' until ' : '' %><%= hourlyTime.fromNow()%><% if (params.hoursFormat === 'h') { %>
            <% } %>
                </span>
                <span class="m-x-1"><%= Math.round(data.hourly[i].temperature) %>ยบ</span>
                <span><%- hourlySummary %></span>
        </li>
        <% } %>
</ul>
